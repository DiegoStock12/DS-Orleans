### Low-level communication
For each silo we have to notion of a 'master' and a 'slave'. Currently only one master is supported.
Both master and slave run using two threads: 1) control thread to verify slaves/master is still alive and send heartbeats, 2) packet-manager thread which receives packets.

Each silo is configured using a `host` and a `port` for UDP commmunication. Keep in mind that if run on the same computer, different ports per silo need to be used!
A packet has the following form:
```scala
 case class Packet(packetType: String,
                    uuid: String,
                    timestamp: Long,
                    data: List[String] = List())
```
In the table below you can see the packets and its usages:

| Type               | Required data                  | Receiving (master)                                                                                                                                                                                                                                                                                                                                                                                                     | Sending (master)                                                                                                                | Receiving (slave)                                                                                                              | Sending (slave)                                                                                          |
|--------------------|--------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------|
| `HEARTBEAT`        | UUID and timestamp             | Heartbeats are received from slaves and slave info will be updated accordingly.                                                                                                                                                                                                                                                                                                                                        | Heartbeats are send to slaves.                                                                                                  | Heartbeats are received from the master and master info will be updated accordingly                                            | Heartbeats are send to the master.                                                                       |
| `HANDSHAKE`        | UUID and timestamp             | If a handshake is received and the slave is not yet in the cluster it will be added and send a `WELCOME` packet. This means that the master is now aware of this slave and will get heartbeats. It will send other slaves a `SLAVE_CONNECT` packet with details of the newly connected slave. Finally, it will send the new slave a `SLAVE_CONNECT` from all other slaves so that the new slave is aware of the other. | -                                                                                                                               | -                                                                                                                              | When a slave is started it will send the (pre-configured) master a handshake to be added to the cluster. |
| `WELCOME`          | UUID and timestamp             | -                                                                                                                                                                                                                                                                                                                                                                                                                      | Send to a slave when added to the cluster. Afterwards the master will send heartbeats to this slave (and the other way around). | Slave is considered connected to the master and will start sending heartbeats as well as recording heartbeats from the master. | -                                                                                                        |
| `SHUTDOWN`         | UUID and timestamp             | Receives this packets from slaves, so its removed from the slave table. Also other slaves are send a `SLAVE_DISCONNECT` for this slave.                                                                                                                                                                                                                                                                                | If a master goes in shutdown it will send this packet to its slaves so that they shutdown first.                                | This means a master will shutdown and therefore the slave will shutdown (and will then send the same packet to the master).    | Will be send if a slave shuts down.                                                                      |
| `SLAVE_CONNECT`    | UUID, timestamp, host and port | -                                                                                                                                                                                                                                                                                                                                                                                                                      | Will send to a slave when a new slave is added to the cluster (and to make the newly added slave aware of the others).          | This will make the slave aware of another slave.                                                                               | -                                                                                                        |
| `SLAVE_DISCONNECT` | UUID, timestamp                | -                                                                                                                                                                                                                                                                                                                                                                                                                      | Will send to a slave when another slave is disconnecting from the cluster.                                                      | This will make the slave remove the disconnected slave.                                                                        | -                                                                                                        |

**Note:** All communication goes through the master. Although they are aware, slaves won't directly communicate to each other.